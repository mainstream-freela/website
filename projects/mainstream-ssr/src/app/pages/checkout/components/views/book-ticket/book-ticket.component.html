<div class="section-content">
    <div class="limited-container py-16 flex flex-col-reverse gap-10 xl:gap-0 xl:flex-row justify-between items-stretch">
        <div class="steps-container w-full xl:w-[735px] flex flex-col gap-10">
            <h1 class="text-(color:--secondary) !font-['Unigeo'] text-2xl leading-[120%] font-semibold">
                Processo da compra do Bilhete
            </h1>
            <div class="steps flex flex-wrap gap-3 justify-start items-stretch">
                <div data-aos="fade-up" data-aos-delay="0" class="box w-full lg:w-[250px] flex flex-col gap-4 p-7 rounded-lg border-[0.5px] border-(color:--secondary)">
                    <h1 class="!font-[Montserrat] font-bold text-lg flex gap-3 items-center text-(color:--primary) leading-[120%] -tracking-[2%]">
                      1º Passo
                    </h1>
                    <div class="details-content flex flex-col gap-3">
                        <p class="!font-['Montserrat'] leading-[120%] text-(color:--secondary) tracking-[-2%]">
                            O Lorem Ipsum é um texto modelo da indústria tipográfica e de impressão.
                        </p>
                    </div>
                </div>
                <div data-aos="fade-up" data-aos-delay="100" class="box w-full lg:w-[250px] flex flex-col gap-4 p-7 rounded-lg border-[0.5px] border-(color:--secondary)">
                    <h1 class="!font-[Montserrat] font-bold text-lg flex gap-3 items-center text-(color:--primary) leading-[120%] -tracking-[2%]">
                      2º Passo
                    </h1>
                    <div class="details-content flex flex-col gap-3">
                        <p class="!font-['Montserrat'] leading-[120%] text-(color:--secondary) tracking-[-2%]">
                            O Lorem Ipsum é um texto modelo da indústria tipográfica e de impressão.
                        </p>
                    </div>
                </div>
                <div data-aos="fade-up" data-aos-delay="0" class="box w-full lg:w-[250px] flex flex-col gap-4 p-7 rounded-lg border-[0.5px] border-(color:--secondary)">
                    <h1 class="!font-[Montserrat] font-bold text-lg flex gap-3 items-center text-(color:--primary) leading-[120%] -tracking-[2%]">
                      3º Passo
                    </h1>
                    <div class="details-content flex flex-col gap-3">
                        <p class="!font-['Montserrat'] leading-[120%] text-(color:--secondary) tracking-[-2%]">
                            O Lorem Ipsum é um texto modelo da indústria tipográfica e de impressão.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div data-aos="fade-left" data-aos-delay="0" class="contact-form w-full xl:w-[470px]">
            <div class="form-container p-7 rounded-lg border-[0.5px] border-(color:--secondary) lg:sticky lg:top-[110px]">
                <div class="form-header flex flex-col gap-4">
                    <!-- <h1 class="text-(color:--secondary) font-semibold text-2xl leading-[120%] !font-['Unigeo']">
                        Cria a sua conta para vender connoscos
                    </h1> -->
                    <p class="text-(color:--secondary)/60 text-sm leading-[120%] -tracking-[2%] !font-['Montserrat']">
                        Insira o seu e-mail para o próximo passo da compra do Bilhete
                    </p>
                </div>
                <div class="form-body mt-4">
                    <form [formGroup]="this.purchaseTicketFormGroup" enctype="multipart/form-data" (submit)="submit()" class="flex flex-col gap-4">
                        <div class="input flex flex-col gap-2">
                            <label for="name" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Nome</label>
                            <input
                            [ngClass]="{
                                'is-invalid': this.purchaseTicketFormGroup.get('name')?.invalid && this.purchaseTicketFormGroup.get('name')?.touched
                            }"
                            type="text" formControlName="name" id="name" placeholder="Nome Completo" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg placeholder:text-(color:--secondary)/50 text-xs placeholder:text-xs">
                            @if (this.purchaseTicketFormGroup.get('name')?.invalid && (this.purchaseTicketFormGroup.get('name')?.touched || this.formIsInvalid())) {
                                <small class="text-red-500">Verifique os dados deste campo</small>
                            }
                        </div>
                        <div class="input flex flex-col gap-2">
                            <label for="email" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Email</label>
                            <input
                            [ngClass]="{
                                'is-invalid': this.purchaseTicketFormGroup.get('email')?.invalid && this.purchaseTicketFormGroup.get('email')?.touched
                            }"
                            type="email" formControlName="email" id="email" placeholder="Email" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg placeholder:text-(color:--secondary)/50 text-xs placeholder:text-xs">
                            @if (this.purchaseTicketFormGroup.get('email')?.invalid && (this.purchaseTicketFormGroup.get('email')?.touched || this.formIsInvalid())) {
                                <small class="text-red-500">Verifique os dados deste campo</small>
                            }
                        </div>
                        <div class="input flex flex-col gap-2">
                            <label for="address" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Endereço</label>
                            <input
                            [ngClass]="{
                                'is-invalid': this.purchaseTicketFormGroup.get('address')?.invalid && this.purchaseTicketFormGroup.get('address')?.touched
                            }"
                            type="text" formControlName="address" id="address" placeholder="Endereço" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg placeholder:text-(color:--secondary)/50 text-xs placeholder:text-xs">
                            @if (this.purchaseTicketFormGroup.get('address')?.invalid && (this.purchaseTicketFormGroup.get('address')?.touched || this.formIsInvalid())) {
                                <small class="text-red-500">Verifique os dados deste campo</small>
                            }
                        </div>
                        <div class="input flex flex-col gap-2">
                            <label for="phone-number" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Contacto</label>
                            <input
                            [ngClass]="{
                                'is-invalid': this.purchaseTicketFormGroup.get('contact')?.invalid && this.purchaseTicketFormGroup.get('contact')?.touched
                            }"
                            type="text" formControlName="contact" id="phone-number" placeholder="+000 111 222 333" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg placeholder:text-(color:--secondary)/50 text-xs placeholder:text-xs">
                            @if (this.purchaseTicketFormGroup.get('contact')?.invalid && (this.purchaseTicketFormGroup.get('contact')?.touched || this.formIsInvalid())) {
                                <small class="text-red-500">Verifique os dados deste campo</small>
                            }
                        </div>
                        <div class="receive-method flex flex-col gap-2">
                            <label for="" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Como deseja fazer o pagamento?</label>
                            <div class="methods flex gap-4 justify-start items-stretch">
                                <button id="paypay_app" (click)="changePaymentMethod(paymentMethodsEnum.PAYPAY_APP)" type="button" [class.selected]="this.selectedPaymentMethod() == this.paymentMethodsEnum.PAYPAY_APP" class="whatsapp cursor-pointer flex gap-5 justify-between items-center border-[0.5px] border-black rounded-[10px] py-[10px] px-3 w-fit">
                                    <div class="option-name flex gap-2 justify-start items-center">
                                        <img src="/assets/static/paypay.png" class="rounded" width="30" alt="">
                                        <span class="!font-['Montserrat'] text-sm leading-[120%] -tracking-[2%]">Aplicativo da PayPay</span>
                                    </div>
                                    <!-- <div class="check-circle">
                                        <div class="circle w-4 h-4 border-[0.5px] duration-[.2s] border-black rounded-full"></div>
                                    </div> -->
                                </button>
                                <button id="reference" (click)="changePaymentMethod(paymentMethodsEnum.REFERENCE)" type="button" [class.selected]="this.selectedPaymentMethod() == this.paymentMethodsEnum.REFERENCE" class="email cursor-pointer flex gap-5 justify-between items-center border-[0.5px] border-black rounded-[10px] py-[10px] px-3 w-fit">
                                    <div class="option-name flex gap-2 justify-start items-center">
                                        <!-- <svg width="29" height="22" viewBox="0 0 29 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M27.3932 3.99078C27.8664 3.66459 28.1503 3.11574 28.1503 2.52787L28.1503 2.52641C28.1503 1.48713 27.3358 0.644612 26.3311 0.644612L2.66879 0.644609C1.66415 0.644609 0.84966 1.48713 0.84966 2.52641L0.84966 2.52734L0.84966 2.52787C0.84966 3.11574 1.13354 3.66459 1.60678 3.99078C3.91596 5.58365 10.874 10.382 13.4903 12.1866C14.1018 12.6084 14.8981 12.6084 15.5096 12.1866C18.126 10.382 25.084 5.58365 27.3932 3.99078Z" stroke="#F20530" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M28.1502 2.52737L28.1502 19.4726C28.1502 19.972 27.9586 20.4507 27.6169 20.8038C27.2757 21.1573 26.8129 21.3554 26.3302 21.3554L2.66957 21.3554C2.18682 21.3554 1.72407 21.1572 1.38281 20.8038C1.0411 20.4507 0.849539 19.972 0.849539 19.4726L0.84954 2.52737" stroke="#F20530" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg> -->
                                        <span class="!font-['Montserrat'] text-sm leading-[120%] -tracking-[2%]">Por Referência</span>
                                    </div>
                                    <!-- <div class="check-circle">
                                        <div class="circle w-4 h-4 border-[0.5px] duration-[.2s] border-black rounded-full"></div>
                                    </div> -->
                                </button>
                            </div>
                        </div>
                        <div class="reference-details flex flex-col gap-2">
                            @if(selectedPaymentMethod() === paymentMethodsEnum.REFERENCE){
                                <label for="" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Informações de pagamento</label>
                                <div class="inputs w-full flex flex-wrap gap-4 justify-between items-stretch">
                                    <div class="input w-full flex flex-col gap-2">
                                        <label for="reference-entity" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)"></label>
                                        <div id="reference-entity" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg text-xs flex justify-between items-center">
                                            <p class="">Entidade: {{ 003435 }}</p>
                                            <app-copy-to-clipboard [target]="'003435'">
                                                <ng-template #buttonTemplate let-copy="copy">
                                                    <button (click)="copy()" type="button" class="px-1 py-0.5 bg-(--primary) cursor-pointer text-white rounded border-none">Copiar</button>
                                                </ng-template>
                                            </app-copy-to-clipboard>
                                        </div>
                                    </div>
                                    <div class="input w-full flex flex-col gap-2">
                                        <label for="reference-number" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)"></label>
                                        <div id="reference-number" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg text-xs flex justify-between items-center">
                                            <p class="">Referência {{ 9923234932 }}</p>
                                            <app-copy-to-clipboard [target]="'9923234932'">
                                                <ng-template #buttonTemplate let-copy="copy">
                                                    <button (click)="copy()" type="button" class="px-1 py-0.5 bg-(--primary) cursor-pointer text-white rounded border-none">Copiar</button>
                                                </ng-template>
                                            </app-copy-to-clipboard>
                                        </div>
                                    </div>

                                    <div class="input w-full flex flex-col gap-2">
                                        <label for="proof-of-transfer" class="font-medium !font-['Montserrat'] text-xs text-(color:--secondary)">Comprovativo de Pagamento (PDF)</label>
                                        <input
                                        #proofFileInput
                                        [ngClass]="{
                                            'is-invalid': this.purchaseTicketFormGroup.get('proof-of-transfer')?.invalid && this.purchaseTicketFormGroup.get('proof-of-transfer')?.touched
                                        }"
                                        type="file" accept=".pdf" (change)="onProofFileSelected($event)" id="proof-of-transfer" class="w-full px-3 py-4 focus:outline-none border-[0.5px] border-(color:--secondary) rounded-lg placeholder:text-(color:--secondary)/50 text-xs placeholder:text-xs">

                                        @if (this.purchaseTicketFormGroup.get('proof-of-transfer')?.invalid && (this.purchaseTicketFormGroup.get('proof-of-transfer')?.touched || this.formIsInvalid())) {
                                            <small class="text-red-500">Verifique os dados deste campo</small>
                                        }
                                        @if (purchaseTicketFormGroup.get('proof-of-transfer')?.errors?.['invalidMimeType']) {
                                            <small class="text-red-500">O ficheiro deve ser um PDF válido.</small>
                                        }
                                        @if (purchaseTicketFormGroup.get('proof-of-transfer')?.errors?.['oversized']) {
                                            <small class="text-red-500">O tamanho do arquivo deve ser de até {{ maxSizeLimit | sizeConverter: 'KB' : 'MB' }}</small>
                                        }
                                    </div>
                                    
                                </div>
                            }
                        </div>
                        <div class="receive-method flex flex-col gap-2">
                            <label for="" class="font-medium !font-['Montserrat'] text-sm text-(color:--secondary)">Onde desejas ser atendido?</label>
                            <div class="options flex flex-wrap gap-4 justify-between items-stretch">
                                <!-- <button id="whatsapp" (click)="changeOption(receiveOptionsEnum.WHATSAPP)" type="button" [class.selected]="selectedOption() == this.receiveOptionsEnum.WHATSAPP" class="whatsapp cursor-pointer flex gap-7 justify-between items-center border-[0.5px] border-black rounded-[10px] py-[10px] px-3 w-fit">
                                    <div class="option-name flex gap-3 justify-start items-center">
                                        <svg width="29" height="30" viewBox="0 0 29 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M20.6068 17.3086C20.4632 17.2251 20.3004 17.1303 20.1044 17.0083C19.9949 16.9399 19.8573 16.8465 19.7116 16.7475C18.9632 16.2394 18.3962 15.8797 17.9135 15.8797C17.8004 15.8797 17.6935 15.8995 17.596 15.9384C17.1731 16.1069 16.8259 16.5569 16.4901 16.9921C16.367 17.1516 16.1908 17.3798 16.0839 17.4818C15.6599 17.4021 14.7656 16.829 13.8006 15.8307C12.8344 14.8312 12.2803 13.905 12.2042 13.4674C12.3027 13.3564 12.5251 13.1729 12.6802 13.0447C13.0993 12.6986 13.5326 12.3407 13.6964 11.9046C13.9053 11.3443 13.5224 10.6741 12.9144 9.71589C12.8187 9.56507 12.7283 9.42263 12.6627 9.31031C12.5443 9.10669 12.4528 8.93824 12.372 8.78976C12.0405 8.18027 11.8215 7.77744 10.9984 7.77744C10.4642 7.77744 9.70899 8.29962 9.19741 8.81747C8.45395 9.57023 8.04443 10.4393 8.04443 11.2663C8.04585 13.5124 9.25762 16.0868 11.3691 18.3319C11.3727 18.3356 11.3763 18.3366 11.3801 18.3404C13.5503 20.5247 16.0402 21.774 18.2114 21.774H18.2123C19.0106 21.774 19.851 21.3552 20.5786 20.5865C21.0796 20.0573 21.5851 19.2817 21.5851 18.7295C21.5851 17.8782 21.1959 17.6517 20.6068 17.3086ZM18.2117 20.6135C16.3622 20.6121 14.1062 19.4526 12.1756 17.5118C10.2993 15.5145 9.17849 13.1805 9.1773 11.2675C9.1773 10.1103 10.6289 9.01007 11.0085 8.94978C11.086 8.95013 11.1267 8.95488 11.1461 8.95828C11.1963 9.01804 11.296 9.20144 11.3848 9.36474C11.4652 9.51251 11.5653 9.6965 11.6927 9.91558C11.7697 10.0476 11.8658 10.1989 11.9675 10.3591C12.1599 10.6624 12.5467 11.272 12.6119 11.5322C12.5028 11.6919 12.1645 11.9713 11.9735 12.129C11.4847 12.5328 11.0625 12.8814 11.0625 13.3741C11.0637 14.5643 12.5456 16.1897 12.9997 16.6595C13.4538 17.1293 15.0251 18.6623 16.178 18.6635C16.6512 18.6619 16.9868 18.2269 17.3755 17.7233C17.5287 17.5247 17.8004 17.1727 17.9554 17.0604C18.2067 17.1274 18.7967 17.528 19.0901 17.7273C19.2449 17.8324 19.3912 17.9317 19.5196 18.0119C19.7306 18.1433 19.9084 18.2468 20.0513 18.33C20.2091 18.4219 20.3865 18.5251 20.4443 18.577C20.4475 18.597 20.4521 18.6391 20.4525 18.7192C20.3937 19.1116 19.3299 20.6121 18.2117 20.6135Z" fill="#F20530"/>
                                            <path d="M26.0765 15.0561C26.0367 11.8896 24.8081 8.89746 22.617 6.63076C20.3854 4.32229 17.4398 3.05092 14.3227 3.05092C11.3136 3.05092 8.49872 4.24869 6.39633 6.42352C4.53071 8.35348 3.38611 10.9275 3.1732 13.6715C2.97128 16.2749 3.61194 18.9096 4.97998 21.1247L3.11186 26.3485C3.03347 26.5678 3.08852 26.8143 3.25204 26.9757C3.35949 27.0818 3.50024 27.1378 3.6432 27.1378C3.71774 27.1378 3.79296 27.1154 3.86427 27.0841L8.72965 24.9422C10.587 26.1381 12.7108 26.7545 14.8916 26.7545H14.8918C17.9003 26.7545 20.7152 25.571 22.8173 23.3964C24.9588 21.1811 26.1163 18.2282 26.0765 15.0561ZM22.0162 22.582C20.1279 24.5354 17.5976 25.6112 14.8915 25.6111C12.8313 25.611 10.8269 24.9872 9.09498 23.8071C9.00107 23.7431 8.89254 23.7105 8.7834 23.7105C8.70846 23.7105 8.63324 23.7258 8.56227 23.757L4.62937 25.4826L6.14168 21.2538C6.20495 21.0768 6.18195 20.8791 6.07994 20.7227C3.30024 16.4627 3.77019 10.7975 7.19735 7.25221C9.08574 5.29869 11.6162 4.22279 14.3227 4.22279C17.1372 4.22279 19.7984 5.37223 21.8159 7.45939C23.797 9.50877 24.9078 12.2121 24.9437 15.0713C24.9796 17.9247 23.9399 20.5921 22.0162 22.582Z" fill="#F20530"/>
                                        </svg>
                                        <span class="!font-['Montserrat'] text-sm leading-[120%] -tracking-[2%]">Whatsapp</span>
                                    </div>
                                    <div class="check-circle">
                                        <div class="circle w-4 h-4 border-[0.5px] duration-[.2s] border-black rounded-full"></div>
                                    </div>
                                </button> -->
                                <button id="email" (click)="changeOption(receiveOptionsEnum.EMAIL)" type="button" [class.selected]="selectedOption() == this.receiveOptionsEnum.EMAIL" class="email cursor-pointer flex gap-7 justify-between items-center border-[0.5px] border-black rounded-[10px] py-[10px] px-3 w-fit">
                                    <div class="option-name flex gap-3 justify-start items-center">
                                        <svg width="29" height="22" viewBox="0 0 29 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M27.3932 3.99078C27.8664 3.66459 28.1503 3.11574 28.1503 2.52787L28.1503 2.52641C28.1503 1.48713 27.3358 0.644612 26.3311 0.644612L2.66879 0.644609C1.66415 0.644609 0.84966 1.48713 0.84966 2.52641L0.84966 2.52734L0.84966 2.52787C0.84966 3.11574 1.13354 3.66459 1.60678 3.99078C3.91596 5.58365 10.874 10.382 13.4903 12.1866C14.1018 12.6084 14.8981 12.6084 15.5096 12.1866C18.126 10.382 25.084 5.58365 27.3932 3.99078Z" stroke="#F20530" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M28.1502 2.52737L28.1502 19.4726C28.1502 19.972 27.9586 20.4507 27.6169 20.8038C27.2757 21.1573 26.8129 21.3554 26.3302 21.3554L2.66957 21.3554C2.18682 21.3554 1.72407 21.1572 1.38281 20.8038C1.0411 20.4507 0.849539 19.972 0.849539 19.4726L0.84954 2.52737" stroke="#F20530" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        <span class="!font-['Montserrat'] text-sm leading-[120%] -tracking-[2%]">Email</span>
                                    </div>
                                    <div class="check-circle">
                                        <div class="circle w-4 h-4 border-[0.5px] duration-[.2s] border-black rounded-full"></div>
                                    </div>
                                </button>
                            </div>
                        </div>
                        <div class="submit w-full mt-7">
                            <button type="submit" [disabled]="this.purchaseTicketFormGroup.invalid" class="bg-(color:--primary) disabled:bg-(color:--primary)/60 cursor-pointer disabled:cursor-auto text-white w-full py-4 text-center flex justify-center items-center !font-['Montserrat'] text-sm font-medium rounded-lg">
                                @if (this.isPurchasingTicket()) {
                                    <img class="w-6 h-6" src="assets/static/loader.svg" alt="">
                                } @else {
                                    Enviar
                                }
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>